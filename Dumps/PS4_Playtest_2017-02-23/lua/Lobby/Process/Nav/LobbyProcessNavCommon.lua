require( "lua.Lobby.Process.LobbyProcess" )

Lobby.Core.AddProcessForward( LuaEnum.UI.MAIN, "mode_select", function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.PressStart( controller )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MAIN, LuaEnum.UI.MODE_SELECT_LAN, function ( controller, fromTarget, toTarget )
	local createLobbyProcess = Lobby.ProcessNavigate.CreatePrivateLobby( controller, fromTarget, toTarget )
	if CoDShared.IsDirectorEnabled() == false and Engine.GetDvarInt( "mp_prototype" ) ~= 0 and Engine.IsUsingCursor() and Engine.GetDvarBool( "ui_usingFreeCursor" ) then
		local modeSelectMenu = LobbyData.GetLobbyMenuByName( LuaEnum.UI.MODE_SELECT_LAN )
		local mode = Engine.GetMostRecentPlayedMode( controller )
		local menuTarget = LobbyData.GetLobbyMenuByName( LuaEnum.UI.LAN_CP )
		if mode == Enum.eModes.MODE_MULTIPLAYER then
			menuTarget = LobbyData.GetLobbyMenuByName( LuaEnum.UI.LAN_MP )
		end
		local f2_local0 = Lobby.Core.GetForwardProcessFunc( modeSelectMenu, menuTarget )
		local moveToMenuTargetProcess = f2_local0( controller, modeSelectMenu, menuTarget )
		Lobby.Process.AppendProcess( createLobbyProcess, moveToMenuTargetProcess )
	end
	return createLobbyProcess
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MAIN, LuaEnum.UI.MODE_SELECT_ONLINE, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreatePrivateLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MAIN, LuaEnum.UI.ONLINE_MP, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreatePrivateLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.MODE_SELECT_ONLINE, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.ChangeNetworkMode( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.MODE_SELECT_LAN, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.ChangeNetworkMode( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.ONLINE_CP, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.LAN_CP, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.EnterLANLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.ONLINE_CP2, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.LAN_CP2, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.ONLINE_DOA, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.LAN_DOA, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.ONLINE_MP, function ( controller, fromTarget, toTarget )
	return Lobby.Process.Navigate( controller, fromTarget, toTarget, "mp" )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.LAN_MP, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.EnterLANLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.ONLINE_ZM, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.LAN_ZM, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.ONLINE_FR, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.LAN_FR, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessBack( LuaEnum.UI.LAN_FR, LuaEnum.UI.MODE_SELECT_ONLINE, function ( controller, fromTarget, toTarget, withParty )
	return Lobby.ProcessNavigate.LeaveGameLobby( controller, fromTarget, toTarget, withParty )
end )
Lobby.Core.AddProcessBack( LuaEnum.UI.MODE_SELECT_ONLINE, LuaEnum.UI.MAIN, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.LeavePrivateLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessBack( LuaEnum.UI.MODE_SELECT_LAN, LuaEnum.UI.MAIN, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.LeavePrivateLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MAIN, "director", function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.PressStart( controller )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.MAIN, LuaEnum.UI.DIRECTOR_ONLINE, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreatePrivateLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessBack( LuaEnum.UI.DIRECTOR_ONLINE, LuaEnum.UI.MAIN, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.LeavePrivateLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.DIRECTOR_ONLINE, LuaEnum.UI.DIRECTOR_ONLINE_CP_CUSTOM, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateCustomLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessBack( LuaEnum.UI.DIRECTOR_ONLINE_CP_CUSTOM, LuaEnum.UI.DIRECTOR_ONLINE, function ( controller, fromTarget, toTarget, withParty )
	return Lobby.ProcessNavigate.LeaveGameLobby( controller, fromTarget, toTarget, withParty )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.DIRECTOR_ONLINE, LuaEnum.UI.DIRECTOR_ONLINE_MP_PUBLIC, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreatePublicGameLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessBack( LuaEnum.UI.DIRECTOR_ONLINE_MP_PUBLIC, LuaEnum.UI.DIRECTOR_ONLINE, function ( controller, fromTarget, toTarget, withParty )
	return Lobby.ProcessNavigate.LeaveGameLobby( controller, fromTarget, toTarget, withParty )
end )
Lobby.Core.AddProcessForward( LuaEnum.UI.DIRECTOR_ONLINE, LuaEnum.UI.DIRECTOR_ONLINE_MP_CUSTOM, function ( controller, fromTarget, toTarget )
	return Lobby.ProcessNavigate.CreateCustomLobby( controller, fromTarget, toTarget )
end )
Lobby.Core.AddProcessBack( LuaEnum.UI.DIRECTOR_ONLINE_MP_CUSTOM, LuaEnum.UI.DIRECTOR_ONLINE, function ( controller, fromTarget, toTarget, withParty )
	return Lobby.ProcessNavigate.LeaveGameLobby( controller, fromTarget, toTarget, withParty )
end )
